var ft=Object.defineProperty;var pt=(o,n,e)=>n in o?ft(o,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[n]=e;var Oe=(o,n,e)=>(pt(o,typeof n!="symbol"?n+"":n,e),e);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function L(){}function rt(o){return o()}function Ne(){return Object.create(null)}function X(o){o.forEach(rt)}function st(o){return typeof o=="function"}function z(o,n){return o!=o?n==n:o!==n||o&&typeof o=="object"||typeof o=="function"}let he;function Z(o,n){return o===n?!0:(he||(he=document.createElement("a")),he.href=n,o===he.href)}function ht(o){return Object.keys(o).length===0}function mt(o,...n){if(o==null){for(const t of n)t(void 0);return L}const e=o.subscribe(...n);return e.unsubscribe?()=>e.unsubscribe():e}function M(o,n,e){o.$$.on_destroy.push(mt(n,e))}function p(o,n){o.appendChild(n)}function I(o,n,e){o.insertBefore(n,e||null)}function O(o){o.parentNode&&o.parentNode.removeChild(o)}function ae(o,n){for(let e=0;e<o.length;e+=1)o[e]&&o[e].d(n)}function b(o){return document.createElement(o)}function S(o){return document.createTextNode(o)}function P(){return S(" ")}function Q(){return S("")}function q(o,n,e,t){return o.addEventListener(n,e,t),()=>o.removeEventListener(n,e,t)}function vt(o){return function(n){return n.preventDefault(),o.call(this,n)}}function g(o,n,e){e==null?o.removeAttribute(n):o.getAttribute(n)!==e&&o.setAttribute(n,e)}function gt(o){return Array.from(o.childNodes)}function D(o,n){n=""+n,o.data!==n&&(o.data=n)}function me(o,n){o.value=n??""}let ce;function ue(o){ce=o}function bt(){if(!ce)throw new Error("Function called outside component initialization");return ce}function De(o){bt().$$.on_mount.push(o)}function yt(o,n){const e=o.$$.callbacks[n.type];e&&e.slice().forEach(t=>t.call(this,n))}const se=[],Ie=[];let le=[];const $e=[],_t=Promise.resolve();let Te=!1;function wt(){Te||(Te=!0,_t.then(lt))}function Ee(o){le.push(o)}function St(o){$e.push(o)}const Pe=new Set;let oe=0;function lt(){if(oe!==0)return;const o=ce;do{try{for(;oe<se.length;){const n=se[oe];oe++,ue(n),kt(n.$$)}}catch(n){throw se.length=0,oe=0,n}for(ue(null),se.length=0,oe=0;Ie.length;)Ie.pop()();for(let n=0;n<le.length;n+=1){const e=le[n];Pe.has(e)||(Pe.add(e),e())}le.length=0}while(se.length);for(;$e.length;)$e.pop()();Te=!1,Pe.clear(),ue(o)}function kt(o){if(o.fragment!==null){o.update(),X(o.before_update);const n=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,n),o.after_update.forEach(Ee)}}function Ct(o){const n=[],e=[];le.forEach(t=>o.indexOf(t)===-1?n.push(t):e.push(t)),e.forEach(t=>t()),le=n}const ge=new Set;let te;function ke(){te={r:0,c:[],p:te}}function Ce(){te.r||X(te.c),te=te.p}function A(o,n){o&&o.i&&(ge.delete(o),o.i(n))}function R(o,n,e,t){if(o&&o.o){if(ge.has(o))return;ge.add(o),te.c.push(()=>{ge.delete(o),t&&(e&&o.d(1),t())}),o.o(n)}else t&&t()}function W(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function Ot(o,n){o.d(1),n.delete(o.key)}function Pt(o,n,e,t,i,r,s,l,u,c,d,a){let h=o.length,f=r.length,v=h;const _={};for(;v--;)_[o[v].key]=v;const m=[],k=new Map,w=new Map,C=[];for(v=f;v--;){const y=a(i,r,v),T=e(y);let B=s.get(T);B?t&&C.push(()=>B.p(y,n)):(B=c(T,y),B.c()),k.set(T,m[v]=B),T in _&&w.set(T,Math.abs(v-_[T]))}const E=new Set,j=new Set;function $(y){A(y,1),y.m(l,d),s.set(y.key,y),d=y.first,f--}for(;h&&f;){const y=m[f-1],T=o[h-1],B=y.key,Y=T.key;y===T?(d=y.first,h--,f--):k.has(Y)?!s.has(B)||E.has(B)?$(y):j.has(Y)?h--:w.get(B)>w.get(Y)?(j.add(B),$(y)):(E.add(Y),h--):(u(T,s),h--)}for(;h--;){const y=o[h];k.has(y.key)||u(y,s)}for(;f;)$(m[f-1]);return X(C),m}function It(o,n,e){const t=o.$$.props[n];t!==void 0&&(o.$$.bound[t]=e,e(o.$$.ctx[t]))}function K(o){o&&o.c()}function x(o,n,e){const{fragment:t,after_update:i}=o.$$;t&&t.m(n,e),Ee(()=>{const r=o.$$.on_mount.map(rt).filter(st);o.$$.on_destroy?o.$$.on_destroy.push(...r):X(r),o.$$.on_mount=[]}),i.forEach(Ee)}function H(o,n){const e=o.$$;e.fragment!==null&&(Ct(e.after_update),X(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function $t(o,n){o.$$.dirty[0]===-1&&(se.push(o),wt(),o.$$.dirty.fill(0)),o.$$.dirty[n/31|0]|=1<<n%31}function J(o,n,e,t,i,r,s,l=[-1]){const u=ce;ue(o);const c=o.$$={fragment:null,ctx:[],props:r,update:L,not_equal:i,bound:Ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:Ne(),dirty:l,skip_bound:!1,root:n.target||u.$$.root};s&&s(c.root);let d=!1;if(c.ctx=e?e(o,n.props||{},(a,h,...f)=>{const v=f.length?f[0]:h;return c.ctx&&i(c.ctx[a],c.ctx[a]=v)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](v),d&&$t(o,a)),h}):[],c.update(),d=!0,X(c.before_update),c.fragment=t?t(c.ctx):!1,n.target){if(n.hydrate){const a=gt(n.target);c.fragment&&c.fragment.l(a),a.forEach(O)}else c.fragment&&c.fragment.c();n.intro&&A(o.$$.fragment),x(o,n.target,n.anchor),lt()}ue(u)}class V{constructor(){Oe(this,"$$");Oe(this,"$$set")}$destroy(){H(this,1),this.$destroy=L}$on(n,e){if(!st(e))return L;const t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),()=>{const i=t.indexOf(e);i!==-1&&t.splice(i,1)}}$set(n){this.$$set&&!ht(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}const Tt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Tt);var je=function(o,n){return je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},je(o,n)};function F(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=o}je(o,n),o.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}var Ae=function(){return Ae=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Ae.apply(this,arguments)};function N(o,n,e,t){return new(e||(e=Promise))(function(i,r){function s(c){try{u(t.next(c))}catch(d){r(d)}}function l(c){try{u(t.throw(c))}catch(d){r(d)}}function u(c){c.done?i(c.value):function(a){return a instanceof e?a:new e(function(h){h(a)})}(c.value).then(s,l)}u((t=t.apply(o,n||[])).next())})}function U(o,n){var e,t,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(u){return function(c){return function(a){if(e)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(e=1,t&&(i=2&a[0]?t.return:a[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,a[1])).done)return i;switch(t=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,t=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||a[0]!==6&&a[0]!==2)){s=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(a[0]===6&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(o,s)}catch(h){a=[6,h],t=0}finally{e=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([u,c])}}}var ut,ee=function(o){function n(e){var t,i,r,s,l=this;return(l=o.call(this,"ClientResponseError")||this).url="",l.status=0,l.response={},l.isAbort=!1,l.originalError=null,Object.setPrototypeOf(l,n.prototype),e!==null&&typeof e=="object"&&(l.url=typeof e.url=="string"?e.url:"",l.status=typeof e.status=="number"?e.status:0,l.isAbort=!!e.isAbort,l.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?l.response=e.response:e.data!==null&&typeof e.data=="object"?l.response=e.data:l.response={}),l.originalError||e instanceof n||(l.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(l.isAbort=!0),l.name="ClientResponseError "+l.status,l.message=(t=l.response)===null||t===void 0?void 0:t.message,l.message||(l.isAbort?l.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((s=(r=(i=l.originalError)===null||i===void 0?void 0:i.cause)===null||r===void 0?void 0:r.message)===null||s===void 0)&&s.includes("ECONNREFUSED ::1")?l.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":l.message="Something went wrong while processing your request."),l}return F(n,o),Object.defineProperty(n.prototype,"data",{get:function(){return this.response},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return Ae({},this)},n}(Error),ve=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Ue(o,n,e){var t=Object.assign({},e||{}),i=t.encode||jt;if(!ve.test(o))throw new TypeError("argument name is invalid");var r=i(n);if(r&&!ve.test(r))throw new TypeError("argument val is invalid");var s=o+"="+r;if(t.maxAge!=null){var l=t.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(l)}if(t.domain){if(!ve.test(t.domain))throw new TypeError("option domain is invalid");s+="; Domain="+t.domain}if(t.path){if(!ve.test(t.path))throw new TypeError("option path is invalid");s+="; Path="+t.path}if(t.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(t.expires)||isNaN(t.expires.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(s+="; HttpOnly"),t.secure&&(s+="; Secure"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():t.priority){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s}function Et(o){return o.indexOf("%")!==-1?decodeURIComponent(o):o}function jt(o){return encodeURIComponent(o)}function at(o){if(o)try{var n=decodeURIComponent(ut(o.split(".")[1]).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)||{}}catch{}return{}}function At(o,n){n===void 0&&(n=0);var e=at(o);return!(Object.keys(e).length>0&&(!e.exp||e.exp-n>Date.now()/1e3))}ut=typeof atob=="function"?atob:function(o){var n=String(o).replace(/=+$/,"");if(n.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,t,i=0,r=0,s="";t=n.charAt(r++);~t&&(e=i%4?64*e+t:t,i++%4)?s+=String.fromCharCode(255&e>>(-2*i&6)):0)t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t);return s};var fe=function(){function o(n){n===void 0&&(n={}),this.$load(n||{})}return o.prototype.load=function(n){return this.$load(n)},o.prototype.$load=function(n){for(var e=0,t=Object.entries(n);e<t.length;e++){var i=t[e],r=i[0],s=i[1];this[r]=s}this.id=n.id!==void 0?n.id:"",this.created=n.created!==void 0?n.created:"",this.updated=n.updated!==void 0?n.updated:""},Object.defineProperty(o.prototype,"$isNew",{get:function(){return!this.id},enumerable:!1,configurable:!0}),o.prototype.clone=function(){return this.$clone()},o.prototype.$clone=function(){var n=typeof structuredClone=="function"?structuredClone(this):JSON.parse(JSON.stringify(this));return new this.constructor(n)},o.prototype.export=function(){return this.$export()},o.prototype.$export=function(){return typeof structuredClone=="function"?structuredClone(this):Object.assign({},this)},o}(),ye=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.$load=function(e){o.prototype.$load.call(this,e),this.collectionId=typeof e.collectionId=="string"?e.collectionId:"",this.collectionName=typeof e.collectionName=="string"?e.collectionName:"",this._loadExpand(e.expand)},n.prototype._loadExpand=function(e){for(var t in e=e||{},this.expand={},e)Array.isArray(e[t])?this.expand[t]=e[t].map(function(i){return new n(i||{})}):this.expand[t]=new n(e[t]||{})},n}(fe),Le=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.$load=function(e){o.prototype.$load.call(this,e),this.avatar=typeof e.avatar=="number"?e.avatar:0,this.email=typeof e.email=="string"?e.email:""},n}(fe),qe="pb_auth",Dt=function(){function o(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}return Object.defineProperty(o.prototype,"token",{get:function(){return this.baseToken},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"model",{get:function(){return this.baseModel},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isValid",{get:function(){return!At(this.token)},enumerable:!1,configurable:!0}),o.prototype.save=function(n,e){this.baseToken=n||"",this.baseModel=e!==null&&typeof e=="object"?e.collectionId!==void 0?new ye(e):new Le(e):null,this.triggerChange()},o.prototype.clear=function(){this.baseToken="",this.baseModel=null,this.triggerChange()},o.prototype.loadFromCookie=function(n,e){e===void 0&&(e=qe);var t=function(s,l){var u={};if(typeof s!="string")return u;for(var c=Object.assign({},l||{}).decode||Et,d=0;d<s.length;){var a=s.indexOf("=",d);if(a===-1)break;var h=s.indexOf(";",d);if(h===-1)h=s.length;else if(h<a){d=s.lastIndexOf(";",a-1)+1;continue}var f=s.slice(d,a).trim();if(u[f]===void 0){var v=s.slice(a+1,h).trim();v.charCodeAt(0)===34&&(v=v.slice(1,-1));try{u[f]=c(v)}catch{u[f]=v}}d=h+1}return u}(n||"")[e]||"",i={};try{(typeof(i=JSON.parse(t))===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)},o.prototype.exportToCookie=function(n,e){var t,i,r;e===void 0&&(e=qe);var s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},l=at(this.token);l!=null&&l.exp?s.expires=new Date(1e3*l.exp):s.expires=new Date("1970-01-01"),n=Object.assign({},s,n);var u={token:this.token,model:((t=this.model)===null||t===void 0?void 0:t.export())||null},c=Ue(e,JSON.stringify(u),n),d=typeof Blob<"u"?new Blob([c]).size:c.length;return u.model&&d>4096&&(u.model={id:(i=u==null?void 0:u.model)===null||i===void 0?void 0:i.id,email:(r=u==null?void 0:u.model)===null||r===void 0?void 0:r.email},this.model instanceof ye&&(u.model.username=this.model.username,u.model.verified=this.model.verified,u.model.collectionId=this.model.collectionId),c=Ue(e,JSON.stringify(u),n)),c},o.prototype.onChange=function(n,e){var t=this;return e===void 0&&(e=!1),this._onChangeCallbacks.push(n),e&&n(this.token,this.model),function(){for(var i=t._onChangeCallbacks.length-1;i>=0;i--)if(t._onChangeCallbacks[i]==n)return delete t._onChangeCallbacks[i],void t._onChangeCallbacks.splice(i,1)}},o.prototype.triggerChange=function(){for(var n=0,e=this._onChangeCallbacks;n<e.length;n++){var t=e[n];t&&t(this.token,this.model)}},o}(),Lt=function(o){function n(e){e===void 0&&(e="pocketbase_auth");var t=o.call(this)||this;return t.storageFallback={},t.storageKey=e,t}return F(n,o),Object.defineProperty(n.prototype,"token",{get:function(){return(this._storageGet(this.storageKey)||{}).token||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){var e,t=this._storageGet(this.storageKey)||{};return t===null||typeof t!="object"||t.model===null||typeof t.model!="object"?null:((e=t.model)===null||e===void 0?void 0:e.collectionId)===void 0?new Le(t.model):new ye(t.model)},enumerable:!1,configurable:!0}),n.prototype.save=function(e,t){this._storageSet(this.storageKey,{token:e,model:t}),o.prototype.save.call(this,e,t)},n.prototype.clear=function(){this._storageRemove(this.storageKey),o.prototype.clear.call(this)},n.prototype._storageGet=function(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){var t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]},n.prototype._storageSet=function(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){var i=t;typeof t!="string"&&(i=JSON.stringify(t)),window.localStorage.setItem(e,i)}else this.storageFallback[e]=t},n.prototype._storageRemove=function(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)===null||t===void 0||t.removeItem(e)),delete this.storageFallback[e]},n}(Dt),ne=function(n){this.client=n},Rt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.getAll=function(e){return e===void 0&&(e={}),this.client.send("/api/settings",{method:"GET",params:e}).then(function(t){return t||{}})},n.prototype.update=function(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),this.client.send("/api/settings",{method:"PATCH",params:t,body:e}).then(function(i){return i||{}})},n.prototype.testS3=function(e,t){e===void 0&&(e="storage"),t===void 0&&(t={});var i={filesystem:e};return this.client.send("/api/settings/test/s3",{method:"POST",params:t,body:i}).then(function(){return!0})},n.prototype.testEmail=function(e,t,i){i===void 0&&(i={});var r={email:e,template:t};return this.client.send("/api/settings/test/email",{method:"POST",params:i,body:r}).then(function(){return!0})},n.prototype.generateAppleClientSecret=function(e,t,i,r,s,l,u){return l===void 0&&(l={}),u===void 0&&(u={}),l=Object.assign({clientId:e,teamId:t,keyId:i,privateKey:r,duration:s},l),this.client.send("/api/settings/apple/generate-client-secret",{method:"POST",params:u,body:l})},n}(ne),ct=function(n,e,t,i,r){this.page=n>0?n:1,this.perPage=e>=0?e:0,this.totalItems=t>=0?t:0,this.totalPages=i>=0?i:0,this.items=r||[]},Re=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.getFullList=function(e,t){if(typeof e=="number")return this._getFullList(this.baseCrudPath,e,t);var i=Object.assign({},e,t),r=500;return i.batch&&(r=i.batch,delete i.batch),this._getFullList(this.baseCrudPath,r,i)},n.prototype.getList=function(e,t,i){return e===void 0&&(e=1),t===void 0&&(t=30),i===void 0&&(i={}),this._getList(this.baseCrudPath,e,t,i)},n.prototype.getFirstListItem=function(e,t){return t===void 0&&(t={}),this._getFirstListItem(this.baseCrudPath,e,t)},n.prototype.getOne=function(e,t){return t===void 0&&(t={}),this._getOne(this.baseCrudPath,e,t)},n.prototype.create=function(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),this._create(this.baseCrudPath,e,t)},n.prototype.update=function(e,t,i){return t===void 0&&(t={}),i===void 0&&(i={}),this._update(this.baseCrudPath,e,t,i)},n.prototype.delete=function(e,t){return t===void 0&&(t={}),this._delete(this.baseCrudPath,e,t)},n}(function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype._getFullList=function(e,t,i){var r=this;t===void 0&&(t=500),i===void 0&&(i={}),i=Object.assign({skipTotal:1},i);var s=[],l=function(u){return N(r,void 0,void 0,function(){return U(this,function(c){return[2,this._getList(e,u,t||500,i).then(function(d){var a=d.items;return s=s.concat(a),a.length==d.perPage?l(u+1):s})]})})};return l(1)},n.prototype._getList=function(e,t,i,r){var s=this;return t===void 0&&(t=1),i===void 0&&(i=30),r===void 0&&(r={}),r=Object.assign({page:t,perPage:i},r),this.client.send(e,{method:"GET",params:r}).then(function(l){var u=[];if(l!=null&&l.items){l.items=l.items||[];for(var c=0,d=l.items;c<d.length;c++){var a=d[c];u.push(s.decode(a))}}return new ct((l==null?void 0:l.page)||1,(l==null?void 0:l.perPage)||0,(l==null?void 0:l.totalItems)||0,(l==null?void 0:l.totalPages)||0,u)})},n.prototype._getOne=function(e,t,i){var r=this;return i===void 0&&(i={}),this.client.send(e+"/"+encodeURIComponent(t),{method:"GET",params:i}).then(function(s){return r.decode(s)})},n.prototype._getFirstListItem=function(e,t,i){return i===void 0&&(i={}),i=Object.assign({filter:t,skipTotal:1,$cancelKey:"one_by_filter_"+e+"_"+t},i),this._getList(e,1,1,i).then(function(r){var s;if(!(!((s=r==null?void 0:r.items)===null||s===void 0)&&s.length))throw new ee({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return r.items[0]})},n.prototype._create=function(e,t,i){var r=this;return t===void 0&&(t={}),i===void 0&&(i={}),this.client.send(e,{method:"POST",params:i,body:t}).then(function(s){return r.decode(s)})},n.prototype._update=function(e,t,i,r){var s=this;return i===void 0&&(i={}),r===void 0&&(r={}),this.client.send(e+"/"+encodeURIComponent(t),{method:"PATCH",params:r,body:i}).then(function(l){return s.decode(l)})},n.prototype._delete=function(e,t,i){return i===void 0&&(i={}),this.client.send(e+"/"+encodeURIComponent(t),{method:"DELETE",params:i}).then(function(){return!0})},n}(ne)),Nt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.decode=function(e){return new Le(e)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return"/api/admins"},enumerable:!1,configurable:!0}),n.prototype.update=function(e,t,i){var r=this;return t===void 0&&(t={}),i===void 0&&(i={}),o.prototype.update.call(this,e,t,i).then(function(s){var l,u;return r.client.authStore.model&&((l=r.client.authStore.model)===null||l===void 0?void 0:l.collectionId)===void 0&&((u=r.client.authStore.model)===null||u===void 0?void 0:u.id)===(s==null?void 0:s.id)&&r.client.authStore.save(r.client.authStore.token,s),s})},n.prototype.delete=function(e,t){var i=this;return t===void 0&&(t={}),o.prototype.delete.call(this,e,t).then(function(r){var s,l;return r&&i.client.authStore.model&&((s=i.client.authStore.model)===null||s===void 0?void 0:s.collectionId)===void 0&&((l=i.client.authStore.model)===null||l===void 0?void 0:l.id)===e&&i.client.authStore.clear(),r})},n.prototype.authResponse=function(e){var t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})},n.prototype.authWithPassword=function(e,t,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),i=Object.assign({identity:e,password:t},i),this.client.send(this.baseCrudPath+"/auth-with-password",{method:"POST",params:r,body:i}).then(this.authResponse.bind(this))},n.prototype.authRefresh=function(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),this.client.send(this.baseCrudPath+"/auth-refresh",{method:"POST",params:t,body:e}).then(this.authResponse.bind(this))},n.prototype.requestPasswordReset=function(e,t,i){return t===void 0&&(t={}),i===void 0&&(i={}),t=Object.assign({email:e},t),this.client.send(this.baseCrudPath+"/request-password-reset",{method:"POST",params:i,body:t}).then(function(){return!0})},n.prototype.confirmPasswordReset=function(e,t,i,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:e,password:t,passwordConfirm:i},r),this.client.send(this.baseCrudPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},n}(Re),Ut=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.$load=function(e){o.prototype.$load.call(this,e),this.recordId=typeof e.recordId=="string"?e.recordId:"",this.collectionId=typeof e.collectionId=="string"?e.collectionId:"",this.provider=typeof e.provider=="string"?e.provider:"",this.providerId=typeof e.providerId=="string"?e.providerId:""},n}(fe),qt=function(o){function n(e,t){var i=o.call(this,e)||this;return i.collectionIdOrName=t,i}return F(n,o),n.prototype.decode=function(e){return new ye(e)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return this.baseCollectionPath+"/records"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"baseCollectionPath",{get:function(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)},enumerable:!1,configurable:!0}),n.prototype.subscribeOne=function(e,t){return N(this,void 0,void 0,function(){return U(this,function(i){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)]})})},n.prototype.subscribe=function(e,t){return N(this,void 0,void 0,function(){var i;return U(this,function(r){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName,e)];if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");return i=this.collectionIdOrName,e!=="*"&&(i+="/"+e),[2,this.client.realtime.subscribe(i,t)]})})},n.prototype.unsubscribe=function(e){return N(this,void 0,void 0,function(){return U(this,function(t){return e==="*"?[2,this.client.realtime.unsubscribe(this.collectionIdOrName)]:e?[2,this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e)]:[2,this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)]})})},n.prototype.getFullList=function(e,t){if(typeof e=="number")return o.prototype.getFullList.call(this,e,t);var i=Object.assign({},e,t);return o.prototype.getFullList.call(this,i)},n.prototype.getList=function(e,t,i){return e===void 0&&(e=1),t===void 0&&(t=30),i===void 0&&(i={}),o.prototype.getList.call(this,e,t,i)},n.prototype.getFirstListItem=function(e,t){return t===void 0&&(t={}),o.prototype.getFirstListItem.call(this,e,t)},n.prototype.getOne=function(e,t){return t===void 0&&(t={}),o.prototype.getOne.call(this,e,t)},n.prototype.create=function(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),o.prototype.create.call(this,e,t)},n.prototype.update=function(e,t,i){var r=this;return t===void 0&&(t={}),i===void 0&&(i={}),o.prototype.update.call(this,e,t,i).then(function(s){var l,u,c;return((l=r.client.authStore.model)===null||l===void 0?void 0:l.id)!==(s==null?void 0:s.id)||((u=r.client.authStore.model)===null||u===void 0?void 0:u.collectionId)!==r.collectionIdOrName&&((c=r.client.authStore.model)===null||c===void 0?void 0:c.collectionName)!==r.collectionIdOrName||r.client.authStore.save(r.client.authStore.token,s),s})},n.prototype.delete=function(e,t){var i=this;return t===void 0&&(t={}),o.prototype.delete.call(this,e,t).then(function(r){var s,l,u;return!r||((s=i.client.authStore.model)===null||s===void 0?void 0:s.id)!==e||((l=i.client.authStore.model)===null||l===void 0?void 0:l.collectionId)!==i.collectionIdOrName&&((u=i.client.authStore.model)===null||u===void 0?void 0:u.collectionName)!==i.collectionIdOrName||i.client.authStore.clear(),r})},n.prototype.authResponse=function(e){var t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})},n.prototype.listAuthMethods=function(e){return e===void 0&&(e={}),this.client.send(this.baseCollectionPath+"/auth-methods",{method:"GET",params:e}).then(function(t){return Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]})})},n.prototype.authWithPassword=function(e,t,i,r){var s=this;return i===void 0&&(i={}),r===void 0&&(r={}),i=Object.assign({identity:e,password:t},i),this.client.send(this.baseCollectionPath+"/auth-with-password",{method:"POST",params:r,body:i}).then(function(l){return s.authResponse(l)})},n.prototype.authWithOAuth2Code=function(e,t,i,r,s,l,u){var c=this;return s===void 0&&(s={}),l===void 0&&(l={}),u===void 0&&(u={}),l=Object.assign({provider:e,code:t,codeVerifier:i,redirectUrl:r,createData:s},l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",{method:"POST",params:u,body:l}).then(function(d){return c.authResponse(d)})},n.prototype.authWithOAuth2=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return N(this,void 0,void 0,function(){var i,r,s,l,u=this;return U(this,function(c){switch(c.label){case 0:return e.length>1||typeof(e==null?void 0:e[0])=="string"?(console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),[2,this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{})]):(i=(e==null?void 0:e[0])||{},[4,this.listAuthMethods()]);case 1:if(r=c.sent(),!(s=r.authProviders.find(function(d){return d.name===i.provider})))throw new ee(new Error('Missing or invalid provider "'.concat(i.provider,'".')));return l=this.client.buildUrl("/api/oauth2-redirect"),[2,new Promise(function(d,a){return N(u,void 0,void 0,function(){var h,f,v,_,m,k=this;return U(this,function(w){switch(w.label){case 0:return w.trys.push([0,3,,4]),[4,this.client.realtime.subscribe("@oauth2",function(C){return N(k,void 0,void 0,function(){var E,j,$;return U(this,function(y){switch(y.label){case 0:E=this.client.realtime.clientId,y.label=1;case 1:if(y.trys.push([1,3,,4]),h(),!C.state||E!==C.state)throw new Error("State parameters don't match.");return[4,this.authWithOAuth2Code(s.name,C.code,s.codeVerifier,l,i.createData,i.body,i.query)];case 2:return j=y.sent(),d(j),[3,4];case 3:return $=y.sent(),a(new ee($)),[3,4];case 4:return[2]}})})})];case 1:return h=w.sent(),f={state:this.client.realtime.clientId},!((m=i.scopes)===null||m===void 0)&&m.length&&(f.scope=i.scopes.join(" ")),v=this._replaceQueryParams(s.authUrl+l,f),[4,i.urlCallback?i.urlCallback(v):this._defaultUrlCallback(v)];case 2:return w.sent(),[3,4];case 3:return _=w.sent(),a(new ee(_)),[3,4];case 4:return[2]}})})})]}})})},n.prototype.authRefresh=function(e,t){var i=this;return e===void 0&&(e={}),t===void 0&&(t={}),this.client.send(this.baseCollectionPath+"/auth-refresh",{method:"POST",params:t,body:e}).then(function(r){return i.authResponse(r)})},n.prototype.requestPasswordReset=function(e,t,i){return t===void 0&&(t={}),i===void 0&&(i={}),t=Object.assign({email:e},t),this.client.send(this.baseCollectionPath+"/request-password-reset",{method:"POST",params:i,body:t}).then(function(){return!0})},n.prototype.confirmPasswordReset=function(e,t,i,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:e,password:t,passwordConfirm:i},r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},n.prototype.requestVerification=function(e,t,i){return t===void 0&&(t={}),i===void 0&&(i={}),t=Object.assign({email:e},t),this.client.send(this.baseCollectionPath+"/request-verification",{method:"POST",params:i,body:t}).then(function(){return!0})},n.prototype.confirmVerification=function(e,t,i){return t===void 0&&(t={}),i===void 0&&(i={}),t=Object.assign({token:e},t),this.client.send(this.baseCollectionPath+"/confirm-verification",{method:"POST",params:i,body:t}).then(function(){return!0})},n.prototype.requestEmailChange=function(e,t,i){return t===void 0&&(t={}),i===void 0&&(i={}),t=Object.assign({newEmail:e},t),this.client.send(this.baseCollectionPath+"/request-email-change",{method:"POST",params:i,body:t}).then(function(){return!0})},n.prototype.confirmEmailChange=function(e,t,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),i=Object.assign({token:e,password:t},i),this.client.send(this.baseCollectionPath+"/confirm-email-change",{method:"POST",params:r,body:i}).then(function(){return!0})},n.prototype.listExternalAuths=function(e,t){return t===void 0&&(t={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",{method:"GET",params:t}).then(function(i){var r=[];if(Array.isArray(i))for(var s=0,l=i;s<l.length;s++){var u=l[s];r.push(new Ut(u))}return r})},n.prototype.unlinkExternalAuth=function(e,t,i){return i===void 0&&(i={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),{method:"DELETE",params:i}).then(function(){return!0})},n.prototype._replaceQueryParams=function(e,t){t===void 0&&(t={});var i=e,r="";e.indexOf("?")>=0&&(i=e.substring(0,e.indexOf("?")),r=e.substring(e.indexOf("?")+1));for(var s={},l=0,u=r.split("&");l<u.length;l++){var c=u[l];if(c!=""){var d=c.split("=");s[decodeURIComponent(d[0].replace(/\+/g," "))]=decodeURIComponent((d[1]||"").replace(/\+/g," "))}}for(var a in t)t.hasOwnProperty(a)&&(t[a]==null?delete s[a]:s[a]=t[a]);for(var a in r="",s)s.hasOwnProperty(a)&&(r!=""&&(r+="&"),r+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(s[a].replace(/%20/g,"+")));return r!=""?i+"?"+r:i},n.prototype._defaultUrlCallback=function(e){if(typeof window>"u"||!(window!=null&&window.open))throw new ee(new Error("Not in a browser context - please pass a custom urlCallback function."));var t=1024,i=768,r=window.innerWidth,s=window.innerHeight,l=r/2-(t=t>r?r:t)/2,u=s/2-(i=i>s?s:i)/2;window.open(e,"oauth2-popup","width="+t+",height="+i+",top="+u+",left="+l+",resizable,menubar=no")},n}(Re),Ft=function(n){n===void 0&&(n={}),this.id=n.id!==void 0?n.id:"",this.name=n.name!==void 0?n.name:"",this.type=n.type!==void 0?n.type:"text",this.system=!!n.system,this.required=!!n.required,this.options=typeof n.options=="object"&&n.options!==null?n.options:{}},Mt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.$load=function(e){o.prototype.$load.call(this,e),this.system=!!e.system,this.name=typeof e.name=="string"?e.name:"",this.type=typeof e.type=="string"?e.type:"base",this.options=e.options!==void 0&&e.options!==null?e.options:{},this.indexes=Array.isArray(e.indexes)?e.indexes:[],this.listRule=typeof e.listRule=="string"?e.listRule:null,this.viewRule=typeof e.viewRule=="string"?e.viewRule:null,this.createRule=typeof e.createRule=="string"?e.createRule:null,this.updateRule=typeof e.updateRule=="string"?e.updateRule:null,this.deleteRule=typeof e.deleteRule=="string"?e.deleteRule:null,e.schema=Array.isArray(e.schema)?e.schema:[],this.schema=[];for(var t=0,i=e.schema;t<i.length;t++){var r=i[t];this.schema.push(new Ft(r))}},Object.defineProperty(n.prototype,"isBase",{get:function(){return this.$isBase},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$isBase",{get:function(){return this.type==="base"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAuth",{get:function(){return this.$isAuth},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$isAuth",{get:function(){return this.type==="auth"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isView",{get:function(){return this.$isView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"$isView",{get:function(){return this.type==="view"},enumerable:!1,configurable:!0}),n}(fe),Bt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.decode=function(e){return new Mt(e)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return"/api/collections"},enumerable:!1,configurable:!0}),n.prototype.import=function(e,t,i){return t===void 0&&(t=!1),i===void 0&&(i={}),N(this,void 0,void 0,function(){return U(this,function(r){return[2,this.client.send(this.baseCrudPath+"/import",{method:"PUT",params:i,body:{collections:e,deleteMissing:t}}).then(function(){return!0})]})})},n}(Re),Fe=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.$load=function(e){o.prototype.$load.call(this,e),e.remoteIp=e.remoteIp||e.ip,this.url=typeof e.url=="string"?e.url:"",this.method=typeof e.method=="string"?e.method:"GET",this.status=typeof e.status=="number"?e.status:200,this.auth=typeof e.auth=="string"?e.auth:"guest",this.remoteIp=typeof e.remoteIp=="string"?e.remoteIp:"",this.userIp=typeof e.userIp=="string"?e.userIp:"",this.referer=typeof e.referer=="string"?e.referer:"",this.userAgent=typeof e.userAgent=="string"?e.userAgent:"",this.meta=typeof e.meta=="object"&&e.meta!==null?e.meta:{}},n}(fe),Gt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.getRequestsList=function(e,t,i){return e===void 0&&(e=1),t===void 0&&(t=30),i===void 0&&(i={}),i=Object.assign({page:e,perPage:t},i),this.client.send("/api/logs/requests",{method:"GET",params:i}).then(function(r){var s=[];if(r!=null&&r.items){r.items=(r==null?void 0:r.items)||[];for(var l=0,u=r.items;l<u.length;l++){var c=u[l];s.push(new Fe(c))}}return new ct((r==null?void 0:r.page)||1,(r==null?void 0:r.perPage)||0,(r==null?void 0:r.totalItems)||0,(r==null?void 0:r.totalPages)||0,s)})},n.prototype.getRequest=function(e,t){return t===void 0&&(t={}),this.client.send("/api/logs/requests/"+encodeURIComponent(e),{method:"GET",params:t}).then(function(i){return new Fe(i)})},n.prototype.getRequestsStats=function(e){return e===void 0&&(e={}),this.client.send("/api/logs/requests/stats",{method:"GET",params:e}).then(function(t){return t})},n}(ne),xt=function(o){function n(){var e=o!==null&&o.apply(this,arguments)||this;return e.clientId="",e.eventSource=null,e.subscriptions={},e.lastSentTopics=[],e.maxConnectTimeout=15e3,e.reconnectAttempts=0,e.maxReconnectAttempts=1/0,e.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],e.pendingConnects=[],e}return F(n,o),Object.defineProperty(n.prototype,"isConnected",{get:function(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e,t){var i;return N(this,void 0,void 0,function(){var r,s=this;return U(this,function(l){switch(l.label){case 0:if(!e)throw new Error("topic must be set.");return r=function(u){var c,d=u;try{c=JSON.parse(d==null?void 0:d.data)}catch{}t(c||{})},this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(r),this.isConnected?[3,2]:[4,this.connect()];case 1:return l.sent(),[3,5];case 2:return this.subscriptions[e].length!==1?[3,4]:[4,this.submitSubscriptions()];case 3:return l.sent(),[3,5];case 4:(i=this.eventSource)===null||i===void 0||i.addEventListener(e,r),l.label=5;case 5:return[2,function(){return N(s,void 0,void 0,function(){return U(this,function(u){return[2,this.unsubscribeByTopicAndListener(e,r)]})})}]}})})},n.prototype.unsubscribe=function(e){var t;return N(this,void 0,void 0,function(){var i,r,s;return U(this,function(l){switch(l.label){case 0:if(!this.hasSubscriptionListeners(e))return[2];if(e){for(i=0,r=this.subscriptions[e];i<r.length;i++)s=r[i],(t=this.eventSource)===null||t===void 0||t.removeEventListener(e,s);delete this.subscriptions[e]}else this.subscriptions={};return this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3]);case 1:return this.hasSubscriptionListeners(e)?[3,3]:[4,this.submitSubscriptions()];case 2:l.sent(),l.label=3;case 3:return[2]}})})},n.prototype.unsubscribeByPrefix=function(e){var t;return N(this,void 0,void 0,function(){var i,r,s,l,u;return U(this,function(c){switch(c.label){case 0:for(r in i=!1,this.subscriptions)if(r.startsWith(e)){for(i=!0,s=0,l=this.subscriptions[r];s<l.length;s++)u=l[s],(t=this.eventSource)===null||t===void 0||t.removeEventListener(r,u);delete this.subscriptions[r]}return i?this.hasSubscriptionListeners()?[4,this.submitSubscriptions()]:[3,2]:[2];case 1:return c.sent(),[3,3];case 2:this.disconnect(),c.label=3;case 3:return[2]}})})},n.prototype.unsubscribeByTopicAndListener=function(e,t){var i;return N(this,void 0,void 0,function(){var r,s;return U(this,function(l){switch(l.label){case 0:if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return[2];for(r=!1,s=this.subscriptions[e].length-1;s>=0;s--)this.subscriptions[e][s]===t&&(r=!0,delete this.subscriptions[e][s],this.subscriptions[e].splice(s,1),(i=this.eventSource)===null||i===void 0||i.removeEventListener(e,t));return r?(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3])):[2];case 1:return this.hasSubscriptionListeners(e)?[3,3]:[4,this.submitSubscriptions()];case 2:l.sent(),l.label=3;case 3:return[2]}})})},n.prototype.hasSubscriptionListeners=function(e){var t,i;if(this.subscriptions=this.subscriptions||{},e)return!!(!((t=this.subscriptions[e])===null||t===void 0)&&t.length);for(var r in this.subscriptions)if(!((i=this.subscriptions[r])===null||i===void 0)&&i.length)return!0;return!1},n.prototype.submitSubscriptions=function(){return N(this,void 0,void 0,function(){return U(this,function(e){return this.clientId?(this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),[2,this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},params:{$cancelKey:this.getSubscriptionsCancelKey()}}).catch(function(t){if(!(t!=null&&t.isAbort))throw t})]):[2]})})},n.prototype.getSubscriptionsCancelKey=function(){return"realtime_"+this.clientId},n.prototype.getNonEmptySubscriptionTopics=function(){var e=[];for(var t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e},n.prototype.addAllSubscriptionListeners=function(){if(this.eventSource)for(var e in this.removeAllSubscriptionListeners(),this.subscriptions)for(var t=0,i=this.subscriptions[e];t<i.length;t++){var r=i[t];this.eventSource.addEventListener(e,r)}},n.prototype.removeAllSubscriptionListeners=function(){if(this.eventSource)for(var e in this.subscriptions)for(var t=0,i=this.subscriptions[e];t<i.length;t++){var r=i[t];this.eventSource.removeEventListener(e,r)}},n.prototype.connect=function(){return N(this,void 0,void 0,function(){var e=this;return U(this,function(t){return this.reconnectAttempts>0?[2]:[2,new Promise(function(i,r){e.pendingConnects.push({resolve:i,reject:r}),e.pendingConnects.length>1||e.initConnect()})]})})},n.prototype.initConnect=function(){var e=this;this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(function(){e.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=function(t){e.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",function(t){var i=t;e.clientId=i==null?void 0:i.lastEventId,e.submitSubscriptions().then(function(){return N(e,void 0,void 0,function(){var r;return U(this,function(s){switch(s.label){case 0:r=3,s.label=1;case 1:return this.hasUnsentSubscriptions()&&r>0?(r--,[4,this.submitSubscriptions()]):[3,3];case 2:return s.sent(),[3,1];case 3:return[2]}})})}).then(function(){for(var r=0,s=e.pendingConnects;r<s.length;r++)s[r].resolve();e.pendingConnects=[],e.reconnectAttempts=0,clearTimeout(e.reconnectTimeoutId),clearTimeout(e.connectTimeoutId)}).catch(function(r){e.clientId="",e.connectErrorHandler(r)})})},n.prototype.hasUnsentSubscriptions=function(){var e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(var t=0,i=e;t<i.length;t++){var r=i[t];if(!this.lastSentTopics.includes(r))return!0}return!1},n.prototype.connectErrorHandler=function(e){var t=this;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(var i=0,r=this.pendingConnects;i<r.length;i++)r[i].reject(new ee(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);var s=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(function(){t.initConnect()},s)},n.prototype.disconnect=function(e){var t;if(e===void 0&&(e=!1),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)===null||t===void 0||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(var i=0,r=this.pendingConnects;i<r.length;i++)r[i].resolve();this.pendingConnects=[]}},n}(ne),Ht=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.check=function(e){return e===void 0&&(e={}),this.client.send("/api/health",{method:"GET",params:e})},n}(ne),Wt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.getUrl=function(e,t,i){i===void 0&&(i={});var r=[];r.push("api"),r.push("files"),r.push(encodeURIComponent(e.collectionId||e.collectionName)),r.push(encodeURIComponent(e.id)),r.push(encodeURIComponent(t));var s=this.client.buildUrl(r.join("/"));if(Object.keys(i).length){i.download===!1&&delete i.download;var l=new URLSearchParams(i);s+=(s.includes("?")?"&":"?")+l}return s},n.prototype.getToken=function(e){return e===void 0&&(e={}),this.client.send("/api/files/token",{method:"POST",params:e}).then(function(t){return(t==null?void 0:t.token)||""})},n}(ne),zt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return F(n,o),n.prototype.getFullList=function(e){return e===void 0&&(e={}),this.client.send("/api/backups",{method:"GET",params:e})},n.prototype.create=function(e,t){t===void 0&&(t={});var i={name:e};return this.client.send("/api/backups",{method:"POST",params:t,body:i}).then(function(){return!0})},n.prototype.delete=function(e,t){return t===void 0&&(t={}),this.client.send("/api/backups/".concat(encodeURIComponent(e)),{method:"DELETE",params:t}).then(function(){return!0})},n.prototype.restore=function(e,t){return t===void 0&&(t={}),this.client.send("/api/backups/".concat(encodeURIComponent(e),"/restore"),{method:"POST",params:t}).then(function(){return!0})},n.prototype.getDownloadUrl=function(e,t){return this.client.buildUrl("/api/backups/".concat(encodeURIComponent(t),"?token=").concat(encodeURIComponent(e)))},n}(ne),Kt=function(){function o(n,e,t){n===void 0&&(n="/"),t===void 0&&(t="en-US"),this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=n,this.lang=t,this.authStore=e||new Lt,this.admins=new Nt(this),this.collections=new Bt(this),this.files=new Wt(this),this.logs=new Gt(this),this.settings=new Rt(this),this.realtime=new xt(this),this.health=new Ht(this),this.backups=new zt(this)}return o.prototype.collection=function(n){return this.recordServices[n]||(this.recordServices[n]=new qt(this,n)),this.recordServices[n]},o.prototype.autoCancellation=function(n){return this.enableAutoCancellation=!!n,this},o.prototype.cancelRequest=function(n){return this.cancelControllers[n]&&(this.cancelControllers[n].abort(),delete this.cancelControllers[n]),this},o.prototype.cancelAllRequests=function(){for(var n in this.cancelControllers)this.cancelControllers[n].abort();return this.cancelControllers={},this},o.prototype.send=function(n,e){var t,i,r,s,l,u,c,d;return N(this,void 0,void 0,function(){var a,h,f,v,_,m,k,w,C,E=this;return U(this,function(j){switch(j.label){case 0:return a=Object.assign({method:"GET"},e),this.isFormData(a.body)||(a.body&&typeof a.body!="string"&&(a.body=JSON.stringify(a.body)),((t=a==null?void 0:a.headers)===null||t===void 0?void 0:t["Content-Type"])===void 0&&(a.headers=Object.assign({},a.headers,{"Content-Type":"application/json"}))),((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i["Accept-Language"])===void 0&&(a.headers=Object.assign({},a.headers,{"Accept-Language":this.lang})),!((r=this.authStore)===null||r===void 0)&&r.token&&((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s.Authorization)===void 0&&(a.headers=Object.assign({},a.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&((l=a.params)===null||l===void 0?void 0:l.$autoCancel)!==!1&&(h=((u=a.params)===null||u===void 0?void 0:u.$cancelKey)||(a.method||"GET")+n,this.cancelRequest(h),f=new AbortController,this.cancelControllers[h]=f,a.signal=f.signal),(c=a.params)===null||c===void 0||delete c.$autoCancel,(d=a.params)===null||d===void 0||delete d.$cancelKey,v=this.buildUrl(n),a.params!==void 0&&((_=this.serializeQueryParams(a.params))&&(v+=(v.includes("?")?"&":"?")+_),delete a.params),this.beforeSend?(w=(k=Object).assign,C=[{}],[4,this.beforeSend(v,a)]):[3,2];case 1:(m=w.apply(k,C.concat([j.sent()]))).url!==void 0||m.options!==void 0?(v=m.url||v,a=m.options||a):Object.keys(m).length&&(a=m,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`.")),j.label=2;case 2:return[2,fetch(v,a).then(function($){return N(E,void 0,void 0,function(){var y;return U(this,function(T){switch(T.label){case 0:y={},T.label=1;case 1:return T.trys.push([1,3,,4]),[4,$.json()];case 2:return y=T.sent(),[3,4];case 3:return T.sent(),[3,4];case 4:return this.afterSend?[4,this.afterSend($,y)]:[3,6];case 5:y=T.sent(),T.label=6;case 6:if($.status>=400)throw new ee({url:$.url,status:$.status,data:y});return[2,y]}})})}).catch(function($){throw new ee($)})]}})})},o.prototype.getFileUrl=function(n,e,t){return t===void 0&&(t={}),this.files.getUrl(n,e,t)},o.prototype.buildUrl=function(n){var e,t=this.baseUrl;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=!((e=window.location.origin)===null||e===void 0)&&e.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseUrl),n&&(t+=t.endsWith("/")?"":"/",t+=n.startsWith("/")?n.substring(1):n),t},o.prototype.isFormData=function(n){return n&&(n.constructor.name==="FormData"||typeof FormData<"u"&&n instanceof FormData)},o.prototype.serializeQueryParams=function(n){var e=[];for(var t in n)if(n[t]!==null){var i=n[t],r=encodeURIComponent(t);if(Array.isArray(i))for(var s=0,l=i;s<l.length;s++){var u=l[s];e.push(r+"="+encodeURIComponent(u))}else i instanceof Date?e.push(r+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?e.push(r+"="+encodeURIComponent(JSON.stringify(i))):e.push(r+"="+encodeURIComponent(i))}return e.join("&")},o}();const re=[];function pe(o,n=L){let e;const t=new Set;function i(l){if(z(o,l)&&(o=l,e)){const u=!re.length;for(const c of t)c[1](),re.push(c,o);if(u){for(let c=0;c<re.length;c+=2)re[c][0](re[c+1]);re.length=0}}}function r(l){i(l(o))}function s(l,u=L){const c=[l,u];return t.add(c),t.size===1&&(e=n(i,r)||L),l(o),()=>{t.delete(c),t.size===0&&e&&(e(),e=null)}}return{set:i,update:r,subscribe:s}}const G=new Kt("https://shiftswitch.pockethost.io"),ie=pe(G.authStore.model);G.authStore.onChange(o=>{console.log("authStore changed",o),ie.set(G.authStore.model)});const de=pe(!1),_e=pe(!1),be=pe(!1),we=pe(new Date);function Jt(o){var j,$;let n,e,t,i,r,s,l=new Date(o[0].dateStart).toLocaleDateString("en-US")+"",u,c,d,a,h=(($=(j=o[0].expand)==null?void 0:j.employee)==null?void 0:$.username)+"",f,v,_,m,k,w,C,E;return{c(){n=b("div"),e=b("div"),e.textContent="Are you sure you want to swap this shift?",t=P(),i=b("div"),r=b("div"),s=S("Date: "),u=S(l),c=P(),d=b("div"),a=S("Name: "),f=S(h),v=P(),_=b("div"),m=b("button"),m.textContent="YES!",k=P(),w=b("button"),w.textContent="NO!",g(i,"class","group svelte-qtz83h"),g(m,"class","button svelte-qtz83h"),g(w,"class","button svelte-qtz83h"),g(_,"class","group svelte-qtz83h"),g(n,"class","popup svelte-qtz83h")},m(y,T){I(y,n,T),p(n,e),p(n,t),p(n,i),p(i,r),p(r,s),p(r,u),p(i,c),p(i,d),p(d,a),p(d,f),p(n,v),p(n,_),p(_,m),p(_,k),p(_,w),C||(E=[q(m,"click",o[1]),q(w,"click",o[2])],C=!0)},p(y,[T]){var B,Y;T&1&&l!==(l=new Date(y[0].dateStart).toLocaleDateString("en-US")+"")&&D(u,l),T&1&&h!==(h=((Y=(B=y[0].expand)==null?void 0:B.employee)==null?void 0:Y.username)+"")&&D(f,h)},i:L,o:L,d(y){y&&O(n),C=!1,X(E)}}}function Vt(o,n,e){let{shift:t}=n,{onClose:i}=n;async function r(){await G.collection("shifts").update(t.id,{swap:!0}),i()}function s(){i()}return o.$$set=l=>{"shift"in l&&e(0,t=l.shift),"onClose"in l&&e(3,i=l.onClose)},[t,r,s,i]}class dt extends V{constructor(n){super(),J(this,n,Vt,Jt,z,{shift:0,onClose:3})}}function Me(o,n,e){const t=o.slice();return t[10]=n[e][0],t[0]=n[e][1],t}function Be(o,n,e){const t=o.slice();return t[13]=n[e],t}function Ge(o){let n,e,t,i,r,s;return t=new dt({props:{shift:o[4],onClose:o[6]}}),{c(){n=b("div"),e=P(),K(t.$$.fragment),g(n,"class","overlay svelte-db93qx")},m(l,u){I(l,n,u),I(l,e,u),x(t,l,u),i=!0,r||(s=q(n,"click",o[6]),r=!0)},p(l,u){const c={};u&16&&(c.shift=l[4]),t.$set(c)},i(l){i||(A(t.$$.fragment,l),i=!0)},o(l){R(t.$$.fragment,l),i=!1},d(l){l&&(O(n),O(e)),H(t,l),r=!1,s()}}}function xe(o){let n,e,t=o[10]+"",i,r,s=[],l=new Map,u,c=W(o[0]);const d=a=>a[13].id;for(let a=0;a<c.length;a+=1){let h=Be(o,c,a),f=d(h);l.set(f,s[a]=We(f,h))}return{c(){n=b("div"),e=b("div"),i=S(t),r=P();for(let a=0;a<s.length;a+=1)s[a].c();u=P(),g(e,"class","date svelte-db93qx"),g(n,"class","scroll_day svelte-db93qx")},m(a,h){I(a,n,h),p(n,e),p(e,i),p(n,r);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(n,null);p(n,u)},p(a,h){h&2&&t!==(t=a[10]+"")&&D(i,t),h&142&&(c=W(a[0]),s=Pt(s,h,d,1,a,c,l,n,Ot,We,u,Be))},d(a){a&&O(n);for(let h=0;h<s.length;h+=1)s[h].d()}}}function He(o){let n;function e(r,s){var l,u;return((u=(l=r[13].expand)==null?void 0:l.employee)==null?void 0:u.username)===r[3].username?Qt:Yt}let t=e(o),i=t(o);return{c(){i.c(),n=Q()},m(r,s){i.m(r,s),I(r,n,s)},p(r,s){t===(t=e(r))&&i?i.p(r,s):(i.d(1),i=t(r),i&&(i.c(),i.m(n.parentNode,n)))},d(r){r&&O(n),i.d(r)}}}function Yt(o){var w,C;let n,e,t=Se((C=(w=o[13].expand)==null?void 0:w.employee)==null?void 0:C.username)+"",i,r,s,l,u=new Date(o[13].dateStart).getHours()+"",c,d,a=new Date(o[13].dateEnd).getHours()+"",h,f,v,_,m=o[13].location+"",k;return{c(){n=b("div"),e=b("div"),i=S(t),r=P(),s=b("div"),l=S("("),c=S(u),d=S("h-"),h=S(a),f=S("h)"),v=P(),_=b("div"),k=S(m),g(e,"class","name svelte-db93qx"),g(s,"class","time svelte-db93qx"),g(_,"class","loc svelte-db93qx"),g(n,"class","shift noswap svelte-db93qx")},m(E,j){I(E,n,j),p(n,e),p(e,i),p(n,r),p(n,s),p(s,l),p(s,c),p(s,d),p(s,h),p(s,f),p(n,v),p(n,_),p(_,k)},p(E,j){var $,y;j&2&&t!==(t=Se((y=($=E[13].expand)==null?void 0:$.employee)==null?void 0:y.username)+"")&&D(i,t),j&2&&u!==(u=new Date(E[13].dateStart).getHours()+"")&&D(c,u),j&2&&a!==(a=new Date(E[13].dateEnd).getHours()+"")&&D(h,a),j&2&&m!==(m=E[13].location+"")&&D(k,m)},d(E){E&&O(n)}}}function Qt(o){var j,$;let n,e,t=Se(($=(j=o[13].expand)==null?void 0:j.employee)==null?void 0:$.username)+"",i,r,s,l,u=new Date(o[13].dateStart).getHours()+"",c,d,a=new Date(o[13].dateEnd).getHours()+"",h,f,v,_,m=o[13].location+"",k,w,C;function E(){return o[9](o[13])}return{c(){n=b("div"),e=b("div"),i=S(t),r=P(),s=b("div"),l=S("("),c=S(u),d=S("h-"),h=S(a),f=S("h)"),v=P(),_=b("div"),k=S(m),g(e,"class","name svelte-db93qx"),g(s,"class","time svelte-db93qx"),g(_,"class","loc svelte-db93qx"),g(n,"class","shift svelte-db93qx")},m(y,T){I(y,n,T),p(n,e),p(e,i),p(n,r),p(n,s),p(s,l),p(s,c),p(s,d),p(s,h),p(s,f),p(n,v),p(n,_),p(_,k),w||(C=q(n,"click",E),w=!0)},p(y,T){var B,Y;o=y,T&2&&t!==(t=Se((Y=(B=o[13].expand)==null?void 0:B.employee)==null?void 0:Y.username)+"")&&D(i,t),T&2&&u!==(u=new Date(o[13].dateStart).getHours()+"")&&D(c,u),T&2&&a!==(a=new Date(o[13].dateEnd).getHours()+"")&&D(h,a),T&2&&m!==(m=o[13].location+"")&&D(k,m)},d(y){y&&O(n),w=!1,C()}}}function We(o,n){var r,s;let e,t,i=(n[2]&&((s=(r=n[13].expand)==null?void 0:r.employee)==null?void 0:s.username)==n[3].username||!n[2])&&He(n);return{key:o,first:null,c(){e=Q(),i&&i.c(),t=Q(),this.first=e},m(l,u){I(l,e,u),i&&i.m(l,u),I(l,t,u)},p(l,u){var c,d;n=l,n[2]&&((d=(c=n[13].expand)==null?void 0:c.employee)==null?void 0:d.username)==n[3].username||!n[2]?i?i.p(n,u):(i=He(n),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(l){l&&(O(e),O(t)),i&&i.d(l)}}}function ze(o){let n,e=o[0].length!=0&&xe(o);return{c(){e&&e.c(),n=Q()},m(t,i){e&&e.m(t,i),I(t,n,i)},p(t,i){t[0].length!=0?e?e.p(t,i):(e=xe(t),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(t){t&&O(n),e&&e.d(t)}}}function Xt(o){let n,e,t,i=o[5]&&Ge(o),r=W(Object.entries(o[1])),s=[];for(let l=0;l<r.length;l+=1)s[l]=ze(Me(o,r,l));return{c(){i&&i.c(),n=P();for(let l=0;l<s.length;l+=1)s[l].c();e=Q()},m(l,u){i&&i.m(l,u),I(l,n,u);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(l,u);I(l,e,u),t=!0},p(l,[u]){if(l[5]?i?(i.p(l,u),u&32&&A(i,1)):(i=Ge(l),i.c(),A(i,1),i.m(n.parentNode,n)):i&&(ke(),R(i,1,1,()=>{i=null}),Ce()),u&142){r=W(Object.entries(l[1]));let c;for(c=0;c<r.length;c+=1){const d=Me(l,r,c);s[c]?s[c].p(d,u):(s[c]=ze(d),s[c].c(),s[c].m(e.parentNode,e))}for(;c<s.length;c+=1)s[c].d(1);s.length=r.length}},i(l){t||(A(i),t=!0)},o(l){R(i),t=!1},d(l){l&&(O(n),O(e)),i&&i.d(l),ae(s,l)}}}function Se(o){return o.charAt(0).toUpperCase()+o.slice(1)}function Zt(o,n,e){let t,i,r;M(o,we,f=>e(8,t=f)),M(o,_e,f=>e(2,i=f)),M(o,ie,f=>e(3,r=f));let{shifts:s}=n,l={},u=null,c=!1,d=()=>{e(5,c=!1),e(4,u=null)};function a(f){e(4,u=f),e(5,c=!0)}const h=f=>a(f);return o.$$set=f=>{"shifts"in f&&e(0,s=f.shifts)},o.$$.update=()=>{var f,v;if(o.$$.dirty&271){e(1,l={});for(const _ of Object.values(s))if((i&&((v=(f=_.expand)==null?void 0:f.employee)==null?void 0:v.username)==r.username||!i)&&new Date(_.dateStart).getMonth()==t.getMonth()){const m=new Date(_.dateStart).getDate();l.hasOwnProperty(m)?l[m].push(_):e(1,l[m]=[_],l)}}},[s,l,i,r,u,c,d,a,t,h]}class en extends V{constructor(n){super(),J(this,n,Zt,Xt,z,{shifts:0})}}function tn(o){let n,e,t,i,r,s;return{c(){n=b("nav"),e=b("div"),t=b("img"),r=P(),s=b("div"),s.textContent=`${on}`,Z(t.src,i=nn)||g(t,"src",i),g(t,"alt","Logo"),g(t,"class","svelte-6bqf02"),g(e,"class","logo svelte-6bqf02"),g(s,"class","nav-text svelte-6bqf02"),g(n,"class","navbar svelte-6bqf02")},m(l,u){I(l,n,u),p(n,e),p(e,t),p(n,r),p(n,s)},p:L,i:L,o:L,d(l){l&&O(n)}}}let nn="valderuzlogo.png",on="ShiftSwitch";class rn extends V{constructor(n){super(),J(this,n,null,tn,z,{})}}function sn(o){let n,e,t,i,r,s,l,u,c,d,a,h;return{c(){n=b("div"),e=b("button"),t=b("img"),r=P(),s=b("button"),l=b("img"),c=P(),d=b("button"),d.innerHTML='<img src="/settings.png" class="svelte-1tfk06b"/>',Z(t.src,i=o[1]?"/grid.png":"/scroll.png")||g(t,"src",i),g(t,"class","svelte-1tfk06b"),g(e,"class","toggle-button svelte-1tfk06b"),Z(l.src,u=o[0]?"/single_user.png":"/multi_user.png")||g(l,"src",u),g(l,"class","svelte-1tfk06b"),g(s,"class","toggle-button svelte-1tfk06b"),g(d,"class","toggle-button svelte-1tfk06b"),g(n,"class","navbar svelte-1tfk06b")},m(f,v){I(f,n,v),p(n,e),p(e,t),p(n,r),p(n,s),p(s,l),p(n,c),p(n,d),a||(h=[q(e,"click",o[2]),q(s,"click",o[3]),q(d,"click",o[4])],a=!0)},p(f,[v]){v&2&&!Z(t.src,i=f[1]?"/grid.png":"/scroll.png")&&g(t,"src",i),v&1&&!Z(l.src,u=f[0]?"/single_user.png":"/multi_user.png")&&g(l,"src",u)},i:L,o:L,d(f){f&&O(n),a=!1,X(h)}}}function ln(o,n,e){let t,i,r;M(o,be,c=>e(5,t=c)),M(o,_e,c=>e(0,i=c)),M(o,de,c=>e(1,r=c));function s(){t&&be.set(!t),de.set(!r)}function l(){_e.set(!i)}function u(){be.set(!t)}return[i,r,s,l,u]}class un extends V{constructor(n){super(),J(this,n,ln,sn,z,{})}}function an(o){let n,e,t,i,r,s,l=o[0].toLocaleString("default",{month:"long"})+"",u,c,d=o[0].getFullYear()+"",a,h,f,v,_,m,k;return{c(){n=b("div"),e=b("button"),t=b("img"),r=P(),s=b("div"),u=S(l),c=P(),a=S(d),h=P(),f=b("button"),v=b("img"),Z(t.src,i=Ke)||g(t,"src",i),g(t,"alt","Button"),g(t,"class","svelte-snqs6p"),g(e,"class","toggle-button svelte-snqs6p"),g(v,"class","rot svelte-snqs6p"),Z(v.src,_=Ke)||g(v,"src",_),g(v,"alt","Button"),g(f,"class","toggle-button svelte-snqs6p"),g(n,"class","layout svelte-snqs6p")},m(w,C){I(w,n,C),p(n,e),p(e,t),p(n,r),p(n,s),p(s,u),p(s,c),p(s,a),p(n,h),p(n,f),p(f,v),m||(k=[q(e,"click",o[3]),q(f,"click",o[4])],m=!0)},p(w,[C]){C&1&&l!==(l=w[0].toLocaleString("default",{month:"long"})+"")&&D(u,l),C&1&&d!==(d=w[0].getFullYear()+"")&&D(a,d)},i:L,o:L,d(w){w&&O(n),m=!1,X(k)}}}let Ke="left_arrow.png";function cn(o,n,e){let{renderDate:t}=n;function i(){t.setMonth(t.getMonth()+1),e(0,t)}function r(){t.setMonth(t.getMonth()-1),e(0,t)}const s=()=>r(),l=()=>i();return o.$$set=u=>{"renderDate"in u&&e(0,t=u.renderDate)},[t,i,r,s,l]}class dn extends V{constructor(n){super(),J(this,n,cn,an,z,{renderDate:0})}}function Je(o,n,e){const t=o.slice();return t[14]=n[e],t}function Ve(o,n,e){const t=o.slice();return t[17]=n[e],t}function Ye(o,n,e){const t=o.slice();return t[14]=n[e],t}function Qe(o){let n,e,t,i,r,s;return t=new dt({props:{shift:o[3],onClose:o[5]}}),{c(){n=b("div"),e=P(),K(t.$$.fragment),g(n,"class","overlay svelte-1sylcjy")},m(l,u){I(l,n,u),I(l,e,u),x(t,l,u),i=!0,r||(s=q(n,"click",o[5]),r=!0)},p(l,u){const c={};u&8&&(c.shift=l[3]),t.$set(c)},i(l){i||(A(t.$$.fragment,l),i=!0)},o(l){R(t.$$.fragment,l),i=!1},d(l){l&&(O(n),O(e)),H(t,l),r=!1,s()}}}function Xe(o){let n;return{c(){n=b("div"),n.textContent=`${o[14]}`},m(e,t){I(e,n,t)},p:L,d(e){e&&O(n)}}}function Ze(o){let n,e=W(o[1][o[14]]),t=[];for(let i=0;i<e.length;i+=1)t[i]=et(Ve(o,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();n=Q()},m(i,r){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,r);I(i,n,r)},p(i,r){if(r&71){e=W(i[1][i[14]]);let s;for(s=0;s<e.length;s+=1){const l=Ve(i,e,s);t[s]?t[s].p(l,r):(t[s]=et(l),t[s].c(),t[s].m(n.parentNode,n))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},d(i){i&&O(n),ae(t,i)}}}function fn(o){var a,h;let n,e,t=((h=(a=o[17].expand)==null?void 0:a.employee)==null?void 0:h.username)+"",i,r,s,l,u=o[17].location+"",c,d;return{c(){n=b("div"),e=b("div"),i=S(t),r=S(" |"),s=P(),l=b("div"),c=S(u),d=P(),g(e,"class","name svelte-1sylcjy"),g(l,"class","loc svelte-1sylcjy"),g(n,"class","shift noswap svelte-1sylcjy")},m(f,v){I(f,n,v),p(n,e),p(e,i),p(e,r),p(n,s),p(n,l),p(l,c),p(n,d)},p(f,v){var _,m;v&3&&t!==(t=((m=(_=f[17].expand)==null?void 0:_.employee)==null?void 0:m.username)+"")&&D(i,t),v&3&&u!==(u=f[17].location+"")&&D(c,u)},d(f){f&&O(n)}}}function pn(o){var v,_;let n,e,t=((_=(v=o[17].expand)==null?void 0:v.employee)==null?void 0:_.username)+"",i,r,s,l,u=o[17].location+"",c,d,a,h;function f(){return o[12](o[17])}return{c(){n=b("div"),e=b("div"),i=S(t),r=S(" |"),s=P(),l=b("div"),c=S(u),d=P(),g(e,"class","name svelte-1sylcjy"),g(l,"class","loc svelte-1sylcjy"),g(n,"class","shift svelte-1sylcjy")},m(m,k){I(m,n,k),p(n,e),p(e,i),p(e,r),p(n,s),p(n,l),p(l,c),p(n,d),a||(h=q(n,"click",f),a=!0)},p(m,k){var w,C;o=m,k&3&&t!==(t=((C=(w=o[17].expand)==null?void 0:w.employee)==null?void 0:C.username)+"")&&D(i,t),k&3&&u!==(u=o[17].location+"")&&D(c,u)},d(m){m&&O(n),a=!1,h()}}}function et(o){let n;function e(r,s){var l,u;return((u=(l=r[17].expand)==null?void 0:l.employee)==null?void 0:u.username)===r[2].username?pn:fn}let t=e(o),i=t(o);return{c(){i.c(),n=Q()},m(r,s){i.m(r,s),I(r,n,s)},p(r,s){t===(t=e(r))&&i?i.p(r,s):(i.d(1),i=t(r),i&&(i.c(),i.m(n.parentNode,n)))},d(r){r&&O(n),i.d(r)}}}function tt(o){let n,e,t=new Date(o[14]).getDate()+"",i,r,s,l=o[1][o[14]]&&typeof o[1][o[14]]=="object"&&o[1][o[14]].length>0&&Ze(o);return{c(){n=b("div"),e=b("div"),i=S(t),r=P(),l&&l.c(),s=P(),g(e,"class","time svelte-1sylcjy"),g(n,"class","calendar-card svelte-1sylcjy")},m(u,c){I(u,n,c),p(n,e),p(e,i),p(n,r),l&&l.m(n,null),p(n,s)},p(u,c){c&1&&t!==(t=new Date(u[14]).getDate()+"")&&D(i,t),u[1][u[14]]&&typeof u[1][u[14]]=="object"&&u[1][u[14]].length>0?l?l.p(u,c):(l=Ze(u),l.c(),l.m(n,s)):l&&(l.d(1),l=null)},d(u){u&&O(n),l&&l.d()}}}function hn(o){let n,e,t,i,r,s=o[4]&&Qe(o),l=W(o[7]),u=[];for(let a=0;a<l.length;a+=1)u[a]=Xe(Ye(o,l,a));let c=W(o[0]),d=[];for(let a=0;a<c.length;a+=1)d[a]=tt(Je(o,c,a));return{c(){s&&s.c(),n=P(),e=b("div");for(let a=0;a<u.length;a+=1)u[a].c();t=P(),i=b("div");for(let a=0;a<d.length;a+=1)d[a].c();g(e,"class","weekdays svelte-1sylcjy"),g(i,"class","calendar-grid svelte-1sylcjy")},m(a,h){s&&s.m(a,h),I(a,n,h),I(a,e,h);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(e,null);I(a,t,h),I(a,i,h);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(i,null);r=!0},p(a,[h]){if(a[4]?s?(s.p(a,h),h&16&&A(s,1)):(s=Qe(a),s.c(),A(s,1),s.m(n.parentNode,n)):s&&(ke(),R(s,1,1,()=>{s=null}),Ce()),h&128){l=W(a[7]);let f;for(f=0;f<l.length;f+=1){const v=Ye(a,l,f);u[f]?u[f].p(v,h):(u[f]=Xe(v),u[f].c(),u[f].m(e,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=l.length}if(h&71){c=W(a[0]);let f;for(f=0;f<c.length;f+=1){const v=Je(a,c,f);d[f]?d[f].p(v,h):(d[f]=tt(v),d[f].c(),d[f].m(i,null))}for(;f<d.length;f+=1)d[f].d(1);d.length=c.length}},i(a){r||(A(s),r=!0)},o(a){R(s),r=!1},d(a){a&&(O(n),O(e),O(t),O(i)),s&&s.d(a),ae(u,a),ae(d,a)}}}function mn(o,n,e){let t,i,r;M(o,we,m=>e(10,t=m)),M(o,_e,m=>e(11,i=m)),M(o,ie,m=>e(2,r=m));let{shifts:s}=n,l,u=[],c={},d=null,a=!1,h=()=>{e(4,a=!1),e(3,d=null)};function f(m){e(3,d=m),e(4,a=!0)}let v=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const _=m=>f(m);return o.$$set=m=>{"shifts"in m&&e(8,s=m.shifts)},o.$$.update=()=>{var m,k;if(o.$$.dirty&1024&&new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),o.$$.dirty&1537){e(0,u=[]),e(9,l=new Date(t.getFullYear(),t.getMonth(),1));const w=(l.getDay()+6)%7;l.setDate(1-w);const C=new Date(l);for(;C<=new Date(t.getFullYear(),t.getMonth()+1,0);)u.push(new Date(C).toISOString().split("T")[0]),C.setDate(C.getDate()+1)}if(o.$$.dirty&3846){e(1,c={});for(const w of Object.values(s))if((i&&((k=(m=w.expand)==null?void 0:m.employee)==null?void 0:k.username)==r.username||!i)&&l<=new Date(w.dateStart)&&new Date(w.dateStart)<=new Date(t.getFullYear(),t.getMonth()+1,0)){const C=new Date(w.dateStart).toISOString().split("T")[0];c.hasOwnProperty(C)?c[C].push(w):e(1,c[C]=[w],c)}}},[u,c,r,d,a,h,f,v,s,l,t,i,_]}class vn extends V{constructor(n){super(),J(this,n,mn,hn,z,{shifts:8})}}function gn(o){let n,e,t,i,r,s,l,u,c,d;return{c(){n=b("form"),e=b("input"),t=P(),i=b("input"),r=P(),s=b("button"),s.textContent="Sign up",l=P(),u=b("button"),u.textContent="Login",g(e,"placeholder","Username"),g(e,"type","text"),g(i,"placeholder","Password"),g(i,"type","password")},m(a,h){I(a,n,h),p(n,e),me(e,o[0]),p(n,t),p(n,i),me(i,o[1]),p(n,r),p(n,s),p(n,l),p(n,u),c||(d=[q(e,"input",o[7]),q(i,"input",o[8]),q(s,"click",o[4]),q(u,"click",o[3]),q(n,"submit",vt(o[6]))],c=!0)},p(a,h){h&1&&e.value!==a[0]&&me(e,a[0]),h&2&&i.value!==a[1]&&me(i,a[1])},d(a){a&&O(n),c=!1,X(d)}}}function bn(o){let n,e,t=o[2].username+"",i,r,s,l,u;return{c(){n=b("p"),e=S("singned in as "),i=S(t),r=P(),s=b("button"),s.textContent="Logout"},m(c,d){I(c,n,d),p(n,e),p(n,i),p(n,r),p(n,s),l||(u=q(s,"click",o[5]),l=!0)},p(c,d){d&4&&t!==(t=c[2].username+"")&&D(i,t)},d(c){c&&O(n),l=!1,u()}}}function yn(o){let n;function e(r,s){return r[2]?bn:gn}let t=e(o),i=t(o);return{c(){i.c(),n=Q()},m(r,s){i.m(r,s),I(r,n,s)},p(r,[s]){t===(t=e(r))&&i?i.p(r,s):(i.d(1),i=t(r),i&&(i.c(),i.m(n.parentNode,n)))},i:L,o:L,d(r){r&&O(n),i.d(r)}}}function _n(o,n,e){let t;M(o,ie,h=>e(2,t=h));let i,r;async function s(){await G.collection("users").authWithPassword(i,r)}async function l(){try{const h={username:i,password:r,passwordConfirm:r,name:"hi mom"},f=await G.collection("users").create(h);await s()}catch(h){console.log("signup failed: "+h)}}function u(){G.authStore.clear()}function c(h){yt.call(this,o,h)}function d(){i=this.value,e(0,i)}function a(){r=this.value,e(1,r)}return[i,r,t,s,l,u,c,d,a]}class wn extends V{constructor(n){super(),J(this,n,_n,yn,z,{})}}function Sn(o){let n,e,t,i,r,s,l=o[1].username+"",u,c,d,a,h=o[1].name+"",f,v,_,m,k,w=o[2]?"Grid":"Scroll",C,E,j;return{c(){n=b("div"),e=b("img"),i=P(),r=b("div"),s=S("Username: "),u=S(l),c=P(),d=b("div"),a=S("Name: "),f=S(h),v=P(),_=b("div"),m=S("Layout preferance: "),k=b("button"),C=S(w),Z(e.src,t=o[0])||g(e,"src",t),g(e,"class","profilepic svelte-1fvyb1o"),g(k,"class","toggle svelte-1fvyb1o"),g(n,"class","card svelte-1fvyb1o")},m($,y){I($,n,y),p(n,e),p(n,i),p(n,r),p(r,s),p(r,u),p(n,c),p(n,d),p(d,a),p(d,f),p(n,v),p(n,_),p(_,m),p(_,k),p(k,C),E||(j=q(k,"click",o[3]),E=!0)},p($,[y]){y&1&&!Z(e.src,t=$[0])&&g(e,"src",t),y&2&&l!==(l=$[1].username+"")&&D(u,l),y&2&&h!==(h=$[1].name+"")&&D(f,h),y&4&&w!==(w=$[2]?"Grid":"Scroll")&&D(C,w)},i:L,o:L,d($){$&&O(n),E=!1,j()}}}function kn(o,n,e){let t,i;M(o,ie,u=>e(1,t=u)),M(o,de,u=>e(2,i=u));async function r(){de.set(!i);const u={useGrid:!i};await G.collection("users").update(t.id,u)}De(()=>{l()});let s;async function l(){const u=await G.collection("users").getOne(t.id,{});e(0,s=G.files.getUrl(u,u.avatar,{thumb:"100x250"}))}return[s,t,i,r]}class Cn extends V{constructor(n){super(),J(this,n,kn,Sn,z,{})}}function On(o){let n,e;return n=new Cn({}),{c(){K(n.$$.fragment)},m(t,i){x(n,t,i),e=!0},p:L,i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){R(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function Pn(o){let n,e;return n=new en({props:{shifts:o[0]}}),{c(){K(n.$$.fragment)},m(t,i){x(n,t,i),e=!0},p(t,i){const r={};i&1&&(r.shifts=t[0]),n.$set(r)},i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){R(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function In(o){let n,e;return n=new vn({props:{shifts:o[0]}}),{c(){K(n.$$.fragment)},m(t,i){x(n,t,i),e=!0},p(t,i){const r={};i&1&&(r.shifts=t[0]),n.$set(r)},i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){R(n.$$.fragment,t),e=!1},d(t){H(n,t)}}}function $n(o){let n,e,t,i;const r=[In,Pn,On],s=[];function l(u,c){return u[1]&&!u[2]?0:!u[1]&&!u[2]?1:2}return n=l(o),e=s[n]=r[n](o),{c(){e.c(),t=Q()},m(u,c){s[n].m(u,c),I(u,t,c),i=!0},p(u,[c]){let d=n;n=l(u),n===d?s[n].p(u,c):(ke(),R(s[d],1,1,()=>{s[d]=null}),Ce(),e=s[n],e?e.p(u,c):(e=s[n]=r[n](u),e.c()),A(e,1),e.m(t.parentNode,t))},i(u){i||(A(e),i=!0)},o(u){R(e),i=!1},d(u){u&&O(t),s[n].d(u)}}}function Tn(o,n,e){let t,i;M(o,de,s=>e(1,t=s)),M(o,be,s=>e(2,i=s));let r=[];return De(async()=>{const s=await G.collection("shifts").getList(1,50,{sort:"dateStart",expand:"employee"});e(0,r=s.items)}),[r,t,i]}class En extends V{constructor(n){super(),J(this,n,Tn,$n,z,{})}}function nt(o,n,e){const t=o.slice();return t[2]=n[e],t}function it(o){var c,d;let n,e,t=((d=(c=o[2].expand)==null?void 0:c.employee)==null?void 0:d.username)+"",i,r,s=new Date(o[2].dateStart).toLocaleString("default")+"",l,u;return{c(){n=b("div"),e=S("Hey! "),i=S(t),r=S(" needs you! Can you take his/her shift on the "),l=S(s),u=S(" ?"),g(n,"class","swap_notification svelte-1sxa2b1")},m(a,h){I(a,n,h),p(n,e),p(n,i),p(n,r),p(n,l),p(n,u)},p(a,h){var f,v;h&1&&t!==(t=((v=(f=a[2].expand)==null?void 0:f.employee)==null?void 0:v.username)+"")&&D(i,t),h&1&&s!==(s=new Date(a[2].dateStart).toLocaleString("default")+"")&&D(l,s)},d(a){a&&O(n)}}}function jn(o){let n,e=W(o[0]),t=[];for(let i=0;i<e.length;i+=1)t[i]=it(nt(o,e,i));return{c(){for(let i=0;i<t.length;i+=1)t[i].c();n=Q()},m(i,r){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,r);I(i,n,r)},p(i,[r]){if(r&1){e=W(i[0]);let s;for(s=0;s<e.length;s+=1){const l=nt(i,e,s);t[s]?t[s].p(l,r):(t[s]=it(l),t[s].c(),t[s].m(n.parentNode,n))}for(;s<t.length;s+=1)t[s].d(1);t.length=e.length}},i:L,o:L,d(i){i&&O(n),ae(t,i)}}}function An(o,n,e){let t;M(o,ie,r=>e(1,t=r));let i=[];return G.autoCancellation(!1),De(async()=>{const r=await G.collection("shifts").getList(1,20,{sort:"dateStart",expand:"employee",filter:`swap = true && employee!="${t.id}" && dateStart >= "${new Date().toISOString()}"`});e(0,i=r.items)}),[i]}class Dn extends V{constructor(n){super(),J(this,n,An,jn,z,{})}}function ot(o){let n,e,t,i,r,s,l,u,c,d,a,h,f;e=new rn({});function v(m){o[2](m)}let _={};return o[1]!==void 0&&(_.renderDate=o[1]),i=new dn({props:_}),Ie.push(()=>It(i,"renderDate",v)),l=new un({}),d=new Dn({}),h=new En({}),{c(){n=b("div"),K(e.$$.fragment),t=P(),K(i.$$.fragment),s=P(),K(l.$$.fragment),u=P(),c=b("div"),K(d.$$.fragment),a=P(),K(h.$$.fragment),g(n,"class","navbar svelte-iq2mwg"),g(c,"class","content svelte-iq2mwg")},m(m,k){I(m,n,k),x(e,n,null),p(n,t),x(i,n,null),p(n,s),x(l,n,null),I(m,u,k),I(m,c,k),x(d,c,null),p(c,a),x(h,c,null),f=!0},p(m,k){const w={};!r&&k&2&&(r=!0,w.renderDate=m[1],St(()=>r=!1)),i.$set(w)},i(m){f||(A(e.$$.fragment,m),A(i.$$.fragment,m),A(l.$$.fragment,m),A(d.$$.fragment,m),A(h.$$.fragment,m),f=!0)},o(m){R(e.$$.fragment,m),R(i.$$.fragment,m),R(l.$$.fragment,m),R(d.$$.fragment,m),R(h.$$.fragment,m),f=!1},d(m){m&&(O(n),O(u),O(c)),H(e),H(i),H(l),H(d),H(h)}}}function Ln(o){let n,e,t,i=o[0]&&ot(o);return e=new wn({}),{c(){i&&i.c(),n=P(),K(e.$$.fragment)},m(r,s){i&&i.m(r,s),I(r,n,s),x(e,r,s),t=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&A(i,1)):(i=ot(r),i.c(),A(i,1),i.m(n.parentNode,n)):i&&(ke(),R(i,1,1,()=>{i=null}),Ce())},i(r){t||(A(i),A(e.$$.fragment,r),t=!0)},o(r){R(i),R(e.$$.fragment,r),t=!1},d(r){r&&O(n),i&&i.d(r),H(e,r)}}}function Rn(o,n,e){let t,i;M(o,ie,s=>e(0,t=s)),M(o,we,s=>e(1,i=s));function r(s){i=s,we.set(i)}return[t,i,r]}class Nn extends V{constructor(n){super(),J(this,n,Rn,Ln,z,{})}}new Nn({target:document.getElementById("app")});
